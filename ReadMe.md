TestEoraCaseBot

Телеграм-бот, который отвечает на вопросы о кейсах компании EORA, используя Retrieval-Augmented Generation (RAG).
Бот анализирует страницы сайта, извлекает контент, индексирует его и формирует ответы с указанием источников.
Бот можно протестировать https://t.me/TestEoraCaseBot


**Технические характеристики:**

- Язык: Python 3.13
- Фреймворк RAG: LlamaIndex
- LLM API: OpenAI (через OpenAIPydanticProgram)
- Парсинг страниц: Requests + BeautifulSoup4
- Интерфейс: Telegram Bot (Aiogram)
- Формат хранения векторов: локальное хранилище LlamaIndex (persist_dir)
- Контейнеризация: Docker + Docker Compose
- Конфигурация и ключи: .env

**Запуск проекта:**
1. Клонировать репозиторий
git clone https://github.com/Jerboard/case_assistent_test.git
cd case_assistent_test/docker

2. Добавить .env

Создайте файл .env в папке docker/ со следующим содержимым:
OPENAI_API_KEY=sk-ваш-ключ
TOKEN=ваш-токен

3. Запуск через Docker Compose
docker compose up -d

4. Использование
Перейдите в Telegram по ссылке: https://t.me/TestEoraCaseBot

**Описание работы:**

Бот принимает список URL-источников из файла .txt.

При первом запуске:

- загружает страницы по списку URL;
- очищает их от лишних данных;
- извлекает текст и индексирует его;
- сохраняет данные в локальное хранилище.

При вопросе пользователя:

- через OpenAIPydanticProgram получает строго структурированный JSON со списком предложений и источников;
- формирует итоговый ответ: каждое предложение + кликабельные ссылки на кейсы;
- отправляет результат пользователю.

**Что пробовал**
- Индексация всего HTML без очистки → работало, но было медленно;
- Очистка страниц перед индексацией → ускорило работу;
- Формирование ответа только через промпт → нестабильно, ссылки иногда отсутствовали;
- Привязка ссылок через re по названию кейса → ненадёжно, ломается если модель не возвращает название.

**Оценка решения**
- Бот выполняет задачу: отвечает на вопросы и вставляет ссылки на источники;
- Минус — жёсткая зависимость от локального индекса. При изменении или добавлении новых кейсов требуется переиндексация всех страниц.

**Что можно улучшить (если больше времени)**

Подключить хранилище векторов (Qdrant), что даст возможность:
- Добавлять новые кейсы без полной переиндексации;
- Точечно обновлять изменённые данные,
- Масштабировать решение.

